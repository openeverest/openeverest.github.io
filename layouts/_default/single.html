{{ define "title" }}{{ .Title }} - {{ .Site.Title }}{{ end }}

{{ define "main" }}
<article class="container mx-auto px-4 py-16 max-w-5xl">
    <header class="mb-8">
        <h1 class="text-5xl font-bold mb-4 text-gray-900">{{ .Title }}</h1>
        <div class="text-gray-600 mb-4">
            <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
            {{ if .Params.authors }}
            <span class="mx-2">â€¢</span>
            <span>By 
                {{ range $index, $author := .Params.authors }}
                    {{ if $index }}, {{ end }}
                    {{ $authorSlug := $author | lower | replaceRE "[^a-z0-9]+" "-" }}
                    {{ $authorPage := $.Site.GetPage (printf "/authors/%s" $authorSlug) }}
                    {{ if $authorPage }}
                        <a href="{{ $authorPage.Permalink }}" class="text-blue-600 hover:underline">{{ $author }}</a>
                    {{ else }}
                        {{ $author }}
                    {{ end }}
                {{ end }}
            </span>
            {{ end }}
        </div>
        {{ if .Params.tags }}
        <div class="flex flex-wrap gap-2 mb-4">
            {{ range .Params.tags }}
            <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="bg-gray-200 text-gray-700 text-sm px-3 py-1 rounded-full hover:bg-gray-300 transition">{{ . }}</a>
            {{ end }}
        </div>
        {{ end }}
        {{ if .Params.image }}
        {{ if .Params.image.url }}
        <figure class="mb-6">
            <img src="{{ .Params.image.url }}" alt="{{ .Title }}" class="rounded-lg shadow-md w-full">
            {{ if .Params.image.attribution }}
            <figcaption class="text-sm text-gray-600 mt-2">
                Image source: <a href="{{ .Params.image.attribution }}" class="text-blue-600 hover:underline" target="_blank">{{ .Params.image.attribution }}</a>
            </figcaption>
            {{ end }}
        </figure>
        {{ end }}
        {{ end }}
    </header>

    <div class="prose prose-lg max-w-none">
        {{ .Content }}
    </div>
</article>
{{ end }}
