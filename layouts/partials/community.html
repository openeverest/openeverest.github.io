{{/* layouts/partials/community.html */}}

{{ $page := .Site.GetPage "/community" }}
{{ if not $page }}
{{ warnf "Community content not found. Please create content/community.md" }}
{{ return }}
{{ end }}

{{ $data := $page.Params }}

<section id="community" class="{{ if $data.dark_background }}bg-gray-900{{ else }}bg-white{{ end }} py-16">
    <div class="container mx-auto px-3 sm:px-4 md:px-6 lg:px-8">
        <div class="text-center max-w-6xl mx-auto">
            <h2 class="text-4xl font-bold mb-6 {{ if $data.dark_background }}text-white{{ else }}text-gray-900{{ end }}">{{ $data.title }}</h2>
            <p class="text-xl {{ if $data.dark_background }}text-gray-300{{ else }}text-gray-600{{ end }} mb-12 max-w-4xl mx-auto">
                {{ $data.subtitle }}
            </p>
        </div>

        <div class="max-w-6xl mx-auto">
            <div class="grid md:grid-cols-2 gap-4 sm:gap-6 md:gap-8 lg:gap-10">
                <!-- Contribute Card (Expanded) -->
                {{ with index $data.sections 0 }}
                <div class="{{ if $data.dark_background }}bg-gradient-to-br from-[#5A75C9] to-[#3A55A9]{{ else }}bg-gradient-to-br from-[#7790DE] to-[#5A75C9]{{ end }} text-white p-8 rounded-xl shadow-lg flex flex-col min-w-0">
                    <h3 class="text-2xl font-bold mb-6 flex items-center">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                            </path>
                        </svg>
                        {{ .title }}
                    </h3>

                    <p class="mb-6 opacity-90 text-sm md:text-base leading-relaxed">{{ .text }}</p>

                    <div class="space-y-6 flex-grow">
                        {{ range .items }}
                        <div class="{{ if $data.dark_background }}bg-white/15{{ else }}bg-white/10{{ end }} backdrop-blur-sm rounded-lg p-5 border {{ if $data.dark_background }}border-white/30{{ else }}border-white/20{{ end }} hover:{{ if $data.dark_background }}bg-white/20{{ else }}bg-white/15{{ end }} transition">
                            <div class="font-semibold text-white text-sm uppercase tracking-wide mb-2">{{ .label }}</div>
                            <p class="text-white/90 text-sm mb-3 leading-snug">{{ .text }}</p>
                            <a href="{{ .link.url }}" target="_blank" rel="noopener"
                                class="inline-flex items-center justify-center bg-white text-[#7790DE] font-semibold text-xs py-2 px-4 sm:px-5 rounded-lg border border-white/20 hover:bg-white hover:border-[#161641] hover:text-[#161641] transition-all duration-300 shadow-sm hover:shadow break-words">
                                {{ .link.text }}
                                <svg class="w-3 h-3 ml-1.5 flex-shrink-0" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                </svg>
                            </a>
                        </div>
                        {{ end }}
                    </div>

                    {{ with .note }}
                    <p class="text-white/70 text-xs mt-6 italic">
                        {{ . }}
                    </p>
                    {{ end }}
                </div>
                {{ end }}

                <!-- Other Cards -->
                <div class="space-y-6 min-w-0">
                {{ range after 1 $data.sections }}
                <div class="{{ if $data.dark_background }}bg-gray-800{{ else }}bg-gray-50{{ end }} p-6 rounded-xl border {{ if $data.dark_background }}border-gray-700{{ else }}border-gray-200{{ end }} hover:shadow-md transition {{ if eq .type "community-meeting" }}{{ if $data.dark_background }}border-blue-800 bg-blue-900/30{{ else }}border-blue-200 bg-blue-50{{ end }}{{ end }}">
                    <h3 class="text-lg font-semibold {{ if $data.dark_background }}text-white{{ else }}text-gray-900{{ end }} mb-2 flex items-center">
                    {{ if eq .icon "slack" }}
                        <svg class="w-5 h-5 mr-2 flex-shrink-0" viewBox="0 0 54 54" xmlns="http://www.w3.org/2000/svg">
                            <!-- Slack logo with official colors -->
                            <g fill="none" fill-rule="evenodd">
                                <!-- Top-left vertical (Blue + Green) -->
                                <path d="M19.712.133a5.381 5.381 0 0 0-5.376 5.387 5.381 5.381 0 0 0 5.376 5.386h5.376V5.52A5.381 5.381 0 0 0 19.712.133m0 14.365H5.376A5.381 5.381 0 0 0 0 19.884a5.381 5.381 0 0 0 5.376 5.387h14.336a5.381 5.381 0 0 0 5.376-5.387 5.381 5.381 0 0 0-5.376-5.386" fill="#36C5F0"/>
                                <!-- Top-right horizontal (Green + Yellow) -->
                                <path d="M53.76 19.884a5.381 5.381 0 0 0-5.376-5.386 5.381 5.381 0 0 0-5.376 5.386v5.387h5.376a5.381 5.381 0 0 0 5.376-5.387m-14.336 0V5.52A5.381 5.381 0 0 0 34.048.133a5.381 5.381 0 0 0-5.376 5.387v14.364a5.381 5.381 0 0 0 5.376 5.387 5.381 5.381 0 0 0 5.376-5.387" fill="#2EB67D"/>
                                <!-- Bottom-right vertical (Yellow + Red) -->
                                <path d="M34.048 54a5.381 5.381 0 0 0 5.376-5.387 5.381 5.381 0 0 0-5.376-5.386h-5.376v5.386A5.381 5.381 0 0 0 34.048 54m0-14.365h14.336a5.381 5.381 0 0 0 5.376-5.386 5.381 5.381 0 0 0-5.376-5.387H34.048a5.381 5.381 0 0 0-5.376 5.387 5.381 5.381 0 0 0 5.376 5.386" fill="#ECB22E"/>
                                <!-- Bottom-left horizontal (Red + Blue) -->
                                <path d="M0 34.249a5.381 5.381 0 0 0 5.376 5.386 5.381 5.381 0 0 0 5.376-5.386v-5.387H5.376A5.381 5.381 0 0 0 0 34.25m14.336-.001v14.364A5.381 5.381 0 0 0 19.712 54a5.381 5.381 0 0 0 5.376-5.387V34.25a5.381 5.381 0 0 0-5.376-5.387 5.381 5.381 0 0 0-5.376 5.387" fill="#E01E5A"/>
                            </g>
                        </svg>
                    {{ end }}
                    {{ .title }}
                    </h3>
                    <p class="{{ if $data.dark_background }}text-gray-300{{ else }}text-gray-600{{ end }} mb-3">{{ .text }}</p>
                    <div class="flex flex-wrap gap-2">
                    {{ range .links }}
                    <a href="{{ .url }}" target="_blank" rel="noopener" 
                        class="text-[#7790DE] {{ if $data.dark_background }}hover:text-white{{ else }}hover:text-[#161641]{{ end }} font-medium text-sm flex items-center">
                        {{ .text }}
                        <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                        </svg>
                    </a>
                    {{ end }}
                    </div>
                </div>
                {{ end }}
                </div>
            </div>
        </div>
    </div>
</section>