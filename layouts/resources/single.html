{{ define "main" }}
<div class="bg-gradient-to-b from-white to-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-12 max-w-7xl">
        <!-- Header -->
        <div class="text-center mb-16">
            <h1 class="text-5xl font-bold mb-4 text-gray-900">{{ .Title }}</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-6">{{ .Summary }}</p>
            
            <!-- Call to Action Button -->
            <a href="https://github.com/openeverest/openeverest.github.io/blob/main/content/resources.md" 
               target="_blank" 
               rel="noopener noreferrer"
               class="inline-flex items-center gap-2 bg-[#7790DE] hover:bg-[#161641] text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                </svg>
                Share your content
            </a>
        </div>

        <!-- Events Section -->
        {{ if .Params.events }}
        <section class="mb-20">
            {{ $currentDate := now }}
            {{ $upcomingEvents := slice }}
            {{ $pastEvents := slice }}
            
            <!-- Sort events into upcoming and past -->
            {{ range .Params.events }}
                {{ $eventDate := time .date }}
                {{ if $eventDate.After $currentDate }}
                    {{ $upcomingEvents = $upcomingEvents | append . }}
                {{ else }}
                    {{ $pastEvents = $pastEvents | append . }}
                {{ end }}
            {{ end }}

            <!-- Upcoming Events -->
            {{ if $upcomingEvents }}
            <div class="mb-16">
                <div class="flex items-center mb-8">
                    <svg class="w-8 h-8 mr-3 text-[#7790DE]" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                    </svg>
                    <h2 class="text-4xl font-bold text-gray-900">Upcoming Events</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {{ range sort $upcomingEvents "date" "desc" }}
                        {{ partial "resource-card.html" (dict "item" . "type" "event" "upcoming" true) }}
                    {{ end }}
                </div>
            </div>
            {{ end }}

            <!-- Past Events -->
            {{ if $pastEvents }}
            <div>
                <div class="flex items-center mb-8">
                    <svg class="w-8 h-8 mr-3 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                    </svg>
                    <h2 class="text-4xl font-bold text-gray-900">Past Events</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {{ range sort $pastEvents "date" "desc" }}
                        {{ partial "resource-card.html" (dict "item" . "type" "event" "upcoming" false) }}
                    {{ end }}
                </div>
            </div>
            {{ end }}
        </section>
        {{ end }}

        <!-- Blog Posts & Articles Section -->
        {{ if .Params.resources }}
        <section class="mb-20">
            <div class="flex items-center mb-8">
                <svg class="w-8 h-8 mr-3 text-[#7790DE]" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/>
                </svg>
                <h2 class="text-4xl font-bold text-gray-900">Blog Posts & Articles</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {{ range sort .Params.resources "date" "desc" }}
                    {{ partial "resource-card.html" (dict "item" . "type" "resource") }}
                {{ end }}
            </div>
        </section>
        {{ end }}

        <!-- Media Section -->
        {{ if .Params.media }}
        <section class="mb-20">
            <div class="flex items-center mb-8">
                <svg class="w-8 h-8 mr-3 text-[#7790DE]" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"/>
                </svg>
                <h2 class="text-4xl font-bold text-gray-900">Videos & Media</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {{ range sort .Params.media "date" "desc" }}
                    {{ partial "resource-card.html" (dict "item" . "type" "media") }}
                {{ end }}
            </div>
        </section>
        {{ end }}

        <!-- Content (call to action) -->
        <div class="prose max-w-none text-center">
            {{ .Content }}
        </div>
    </div>
</div>
{{ end }}
